{"ast":null,"code":"var _jsxFileName = \"/Users/srihitha/Desktop/mern/projfrontend/src/admin/UpdateProduct.js\",\n  _s = $RefreshSig$();\n// import React,{useState,useEffect} from 'react'\n\n// import Base from '../core/Base';\n// import { Link,Navigate } from 'react-router-dom';\n// import { isAuthenticated } from '../auth/helper/index';\n// import {updateProduct,getProduct, getAllCategories} from '../admin/helper/adminapicall';\n// import { useMatch } from 'react-router-dom';\n\n// const UpdateProduct=()=> {\n\n//     const {user,token} = isAuthenticated();\n\n//     const [values,setValues] = useState({\n//         name:\"\",\n//         description:\"\",\n//         price:\"\",\n//         stock:\"\",\n//         photo:\"\",\n//         categories:[],\n//         category:\"\",\n//         loading:false,\n//         error:\"\",\n//         updatedProduct:\"\",\n//         getaRedirect:false,\n//         formData:\"\"\n\n//     })\n\n//     const {name,description,price,stock,categories,category,loading,error,updatedProduct,getaRedirect,formData} = values;\n\n//     // eslint-disable-next-line react-hooks/exhaustive-deps\n//     const preLoad = productId =>{\n//         getProduct(productId).then(data =>{\n\n//             console.log(data);\n//             if(data.error){\n//                 setValues({...values,error:data.error})\n//             }else{\n//                 preLoadCategories();\n//                 setValues({\n//                     ...values,\n//                     name:data.name,\n//                     description:data.description,\n//                     price:data.price,\n//                     category:data.category._id,\n//                     stock:data.stock,\n\n//                     formData:new FormData()\n//                 });\n\n//             }\n//         })\n//     }\n\n// const preLoadCategories = ()=>{\n//     getAllCategories().then(data=>{\n//         if(data.error){\n//             setValues({...values,error:data.error})\n//         }\n//         else{\n//             setValues({\n//                 categories:data,formData:new FormData()\n//             })\n//         }\n//     })\n// }\n\n// const match = useMatch(\n//     \"/admin/product/update/:productId\"\n//   );\n\n//     useEffect(() => {\n//         preLoad(match.params.productId)\n//     }, );\n\n//     const handleChange =name=> event =>{\n//         const value = name ===\"photo\" ? event.target.files[0] : event.target.value;\n//         formData.set(name,value);\n//         setValues({...values,[name]:value})\n\n//     }\n//     const onSubmit = event =>{\n//         event.preventDefault();\n//         setValues({...values,error:\"\",loading:true})\n//         updateProduct(match.params.productId,user._id,token,formData)\n//         .then(data =>{\n//             if(data.error){\n//                 setValues({...values,error:data.error})\n//             }else{\n//                 setValues({...values,name:\"\",price:\"\",stock:\"\",description:\"\",photo:\"\",loading:false,updatedProduct:data.name})\n//             }\n//         })\n\n// }\n\n//     const successMessage =() =>(\n//         <div className=\" alert alert-success mt-3\" style={{display : updatedProduct ? \"\" : \"none\"}}>\n//             <h4>{updatedProduct} updated Successfully</h4>\n//         </div>\n//     )\n\n//     const errorMessage =() =>(\n//         <div className=\" alert alert-danger mt-3\" style={{display : error ? \"\" : \"none\"}}>\n//             <h4>Not able to update {updatedProduct}</h4>\n//         </div>\n//     )\n\n//     const loadingMessage =()=>{\n//         return(\n//         loading && (\n//         <div className=\" issue alert alert-info\" style={{display: loading ? \"\" :\"none\"}}>\n//         Loading......\n//         </div>)\n//     )}\n\n//     const performRedirect =()=>{\n//         if(getaRedirect){\n//             if(user && user.role===1){\n//             return <Navigate to=\"/admin/dashboard\" />\n//             }else{\n//             return <Navigate to=\"/user/dashboard\" />\n//             }\n//         }\n\n//     }\n\n//     const updateProductForm = () => (\n//         <form class=\"row g-3 p-2\" >\n\n//         <div className=\"form-group col-md-12\">\n//         <label type=\"text\" className='text-dark'>Name of Product</label>\n//             <input\n//             onChange={handleChange(\"name\")}\n//             name=\"photo\"\n//             className=\"form-control\"\n//             placeholder=\"Name\"\n//             value={name}\n//             />\n//         </div>\n//         <div className=\"form-group col-md-12\">\n//         <label type=\"text\" className='text-dark'>Description of Product</label>\n//             <textarea\n//             onChange={handleChange(\"description\")}\n//             name=\"photo\"\n//             className=\"form-control\"\n//             placeholder=\"Description\"\n//             value={description}\n//             />\n//         </div>\n//         <div className=\"form-group col-md-12\">\n//         <label type=\"text\" className='text-dark'>Price</label>\n//             <input\n//             onChange={handleChange(\"price\")}\n//             type=\"number\"\n//             className=\"form-control\"\n//             placeholder=\"Price\"\n//             value={price}\n//             />\n//         </div>\n//         <div className=\"form-group col-md-6\">\n//         <label type=\"text\" className='text-dark'>Select Category</label>\n//             <select\n//             onChange={handleChange(\"category\")}\n//             className=\"form-control\"\n//             placeholder=\"Category\"\n//             >\n//             <option>Select</option>\n//                 {categories && categories.map((category,index)=>{\n//                 return(\n//                     <option key={index} value={category._id}>{category.name}</option>\n//                 )\n//             })}\n\n//             </select>\n//         </div>\n//         <div className=\"form-group col-md-6\">\n//         <label type=\"text\" className='text-dark'>stock</label>\n//             <input\n//             onChange={handleChange(\"stock\")}\n//             type=\"number\"\n//             className=\"form-control\"\n//             placeholder=\"Quantity\"\n//             value={stock}\n//             />\n//         </div>\n\n//         <div className=\"form-group col-md-12\">\n//         <label for=\"formFile\" className=\"form-label text-dark\" >Upload Photo</label>\n//             <input\n//                 onChange={handleChange(\"photo\")}\n//                 className=\"form-control\"\n//                 id=\"formFile\"\n//                 type=\"file\"\n//                 name=\"photo\"\n//                 accept=\"image\"\n//                 placeholder=\"choose a file\"\n//             />\n\n//         </div>\n\n//         <button type=\"submit\" onClick={onSubmit} className=\"btn btn-outline-success col-md-6 ml-3 shadow-lg  btn-success  rounded mb-3\">\n//             Update Product\n//         </button>\n//         </form>\n//     );\n\n// return (\n//     <Base title='Add a Product Here! ' description='Welcome to Product Creation Section' className='container'>\n//         <Link to=\"/admin/dashboard\" className='btn shadow-lg rounded mt-4  btn-md bg-white text-dark mb-2'>Admin Home</Link>\n//         <h2  className=\"text-center mb-2 py-4 text-white \">Update a Product</h2>\n//     <div className=\"row mx-auto col-10 col-md-8 col-lg-6 bg-white mb-4 shadow-md rounded\">\n//         <div className='col-md-8 p-1 mt-2 offset-md-2'>\n//             {loadingMessage()}\n//             {performRedirect()}\n//             {successMessage()}\n//             {errorMessage()}\n//             {updateProductForm()}\n//         </div>\n//     </div>\n//     </Base>\n// )\n// }\n\n// export default UpdateProduct;\n\nimport React, { useState, useEffect } from \"react\";\nimport Base from \"../core/Base\";\nimport { Link } from \"react-router-dom\";\nimport { getAllCategories, getProduct, updateProduct } from \"./helper/adminapicall\";\nimport { isAuthenticated } from \"../auth/helper/index\";\nimport { useMatch } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UpdateProduct = () => {\n  _s();\n  const {\n    user,\n    token\n  } = isAuthenticated();\n  const [values, setValues] = useState({\n    name: \"\",\n    description: \"\",\n    price: \"\",\n    stock: \"\",\n    photo: \"\",\n    categories: [],\n    category: \"\",\n    loading: false,\n    error: \"\",\n    createdProduct: \"\",\n    getaRedirect: false,\n    formData: \"\"\n  });\n  const {\n    name,\n    description,\n    price,\n    stock,\n    categories,\n    category,\n    loading,\n    error,\n    createdProduct,\n    getaRedirect,\n    formData\n  } = values;\n  const preload = productId => {\n    getProduct(productId).then(data => {\n      //console.log(data);\n      if (data.error) {\n        setValues({\n          ...values,\n          error: data.error\n        });\n      } else {\n        preloadCategories();\n        setValues({\n          ...values,\n          name: data.name,\n          description: data.description,\n          price: data.price,\n          category: data.category._id,\n          stock: data.stock,\n          formData: new FormData()\n        });\n      }\n    });\n  };\n  const preloadCategories = () => {\n    getAllCategories().then(data => {\n      if (data.error) {\n        setValues({\n          ...values,\n          error: data.error\n        });\n      } else {\n        setValues({\n          categories: data,\n          formData: new FormData()\n        });\n      }\n    });\n  };\n  const match = useMatch(\"/admin/product/update/:productId\");\n  useEffect(() => {\n    preload(match.params.productId);\n  }, []);\n\n  //TODO: work on it\n  const onSubmit = event => {\n    event.preventDefault();\n    setValues({\n      ...values,\n      error: \"\",\n      loading: true\n    });\n    updateProduct(match.params.productId, user._id, token, formData).then(data => {\n      if (data.error) {\n        setValues({\n          ...values,\n          error: data.error\n        });\n      } else {\n        setValues({\n          ...values,\n          name: \"\",\n          description: \"\",\n          price: \"\",\n          photo: \"\",\n          stock: \"\",\n          loading: false,\n          createdProduct: data.name\n        });\n      }\n    });\n  };\n  const handleChange = name => event => {\n    const value = name === \"photo\" ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues({\n      ...values,\n      [name]: value\n    });\n  };\n  const successMessage = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"alert alert-success mt-3\",\n    style: {\n      display: createdProduct ? \"\" : \"none\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: [createdProduct, \" updated successfully\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 354,\n    columnNumber: 5\n  }, this);\n  const errorMessage = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \" alert alert-danger mt-3\",\n    style: {\n      display: error ? \"\" : \"none\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: [\"Not able to update \", createdProduct]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 362,\n    columnNumber: 13\n  }, this);\n  const createProductForm = () => /*#__PURE__*/_jsxDEV(\"form\", {\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      children: \"Post photo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"btn btn-block btn-success\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: handleChange(\"photo\"),\n          type: \"file\",\n          name: \"photo\",\n          accept: \"image\",\n          placeholder: \"choose a file\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange(\"name\"),\n        name: \"photo\",\n        className: \"form-control\",\n        placeholder: \"Name\",\n        value: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n        onChange: handleChange(\"description\"),\n        name: \"photo\",\n        className: \"form-control\",\n        placeholder: \"Description\",\n        value: description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange(\"price\"),\n        type: \"number\",\n        className: \"form-control\",\n        placeholder: \"Price\",\n        value: price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: handleChange(\"category\"),\n        className: \"form-control\",\n        placeholder: \"Category\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          children: \"Select\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this), categories && categories.map((cate, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: cate._id,\n          children: cate.name\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange(\"stock\"),\n        type: \"number\",\n        className: \"form-control\",\n        placeholder: \"Stock\",\n        value: stock\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      onClick: onSubmit,\n      className: \"btn btn-outline-success mb-3\",\n      children: \"Update Product\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 367,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Base, {\n    title: \"Add a product here!\",\n    description: \"Welcome to product creation section\",\n    className: \"container bg-info p-4\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/admin/dashboard\",\n      className: \"btn btn-md btn-dark mb-3\",\n      children: \"Admin Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row bg-dark text-white rounded\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-8 offset-md-2\",\n        children: [successMessage(), createProductForm()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 443,\n    columnNumber: 5\n  }, this);\n};\n_s(UpdateProduct, \"rVW+awrF5Ao6yJ5tmbZcuDWYYQU=\", false, function () {\n  return [useMatch];\n});\n_c = UpdateProduct;\nexport default UpdateProduct;\nvar _c;\n$RefreshReg$(_c, \"UpdateProduct\");","map":{"version":3,"names":["React","useState","useEffect","Base","Link","getAllCategories","getProduct","updateProduct","isAuthenticated","useMatch","jsxDEV","_jsxDEV","UpdateProduct","_s","user","token","values","setValues","name","description","price","stock","photo","categories","category","loading","error","createdProduct","getaRedirect","formData","preload","productId","then","data","preloadCategories","_id","FormData","match","params","onSubmit","event","preventDefault","handleChange","value","target","files","set","successMessage","className","style","display","children","fileName","_jsxFileName","lineNumber","columnNumber","errorMessage","createProductForm","onChange","type","accept","placeholder","map","cate","index","onClick","title","to","_c","$RefreshReg$"],"sources":["/Users/srihitha/Desktop/mern/projfrontend/src/admin/UpdateProduct.js"],"sourcesContent":["// import React,{useState,useEffect} from 'react'\n\n\n// import Base from '../core/Base';\n// import { Link,Navigate } from 'react-router-dom';\n// import { isAuthenticated } from '../auth/helper/index';\n// import {updateProduct,getProduct, getAllCategories} from '../admin/helper/adminapicall';\n// import { useMatch } from 'react-router-dom';\n\n\n\n\n\n\n// const UpdateProduct=()=> {\n    \n    \n//     const {user,token} = isAuthenticated();\n\n//     const [values,setValues] = useState({\n//         name:\"\",\n//         description:\"\",\n//         price:\"\",\n//         stock:\"\",\n//         photo:\"\",\n//         categories:[],\n//         category:\"\",\n//         loading:false,\n//         error:\"\",\n//         updatedProduct:\"\",\n//         getaRedirect:false,\n//         formData:\"\"\n\n//     })\n\n//     const {name,description,price,stock,categories,category,loading,error,updatedProduct,getaRedirect,formData} = values;\n\n//     // eslint-disable-next-line react-hooks/exhaustive-deps\n//     const preLoad = productId =>{\n//         getProduct(productId).then(data =>{\n            \n//             console.log(data);\n//             if(data.error){\n//                 setValues({...values,error:data.error})\n//             }else{\n//                 preLoadCategories();\n//                 setValues({\n//                     ...values,\n//                     name:data.name,\n//                     description:data.description,\n//                     price:data.price,\n//                     category:data.category._id,\n//                     stock:data.stock,\n                    \n//                     formData:new FormData()\n//                 });\n                \n//             }\n//         })\n//     }\n\n\n// const preLoadCategories = ()=>{\n//     getAllCategories().then(data=>{\n//         if(data.error){\n//             setValues({...values,error:data.error})\n//         }\n//         else{\n//             setValues({\n//                 categories:data,formData:new FormData()\n//             })\n//         }\n//     })\n// }\n\n// const match = useMatch(\n//     \"/admin/product/update/:productId\"\n//   );\n\n\n//     useEffect(() => {\n//         preLoad(match.params.productId)\n//     }, );\n\n//     const handleChange =name=> event =>{\n//         const value = name ===\"photo\" ? event.target.files[0] : event.target.value;\n//         formData.set(name,value);\n//         setValues({...values,[name]:value})\n\n//     }\n//     const onSubmit = event =>{\n//         event.preventDefault();\n//         setValues({...values,error:\"\",loading:true})\n//         updateProduct(match.params.productId,user._id,token,formData)\n//         .then(data =>{\n//             if(data.error){\n//                 setValues({...values,error:data.error})\n//             }else{\n//                 setValues({...values,name:\"\",price:\"\",stock:\"\",description:\"\",photo:\"\",loading:false,updatedProduct:data.name})\n//             }\n//         })\n\n// }\n\n//     const successMessage =() =>(\n//         <div className=\" alert alert-success mt-3\" style={{display : updatedProduct ? \"\" : \"none\"}}>\n//             <h4>{updatedProduct} updated Successfully</h4>\n//         </div>\n//     )\n\n//     const errorMessage =() =>(\n//         <div className=\" alert alert-danger mt-3\" style={{display : error ? \"\" : \"none\"}}>\n//             <h4>Not able to update {updatedProduct}</h4>\n//         </div>\n//     )\n\n//     const loadingMessage =()=>{\n//         return(\n//         loading && (\n//         <div className=\" issue alert alert-info\" style={{display: loading ? \"\" :\"none\"}}>\n//         Loading......\n//         </div>)\n//     )}\n\n//     const performRedirect =()=>{\n//         if(getaRedirect){\n//             if(user && user.role===1){\n//             return <Navigate to=\"/admin/dashboard\" />\n//             }else{\n//             return <Navigate to=\"/user/dashboard\" />\n//             }\n//         }\n        \n//     }\n\n//     const updateProductForm = () => (\n//         <form class=\"row g-3 p-2\" >\n        \n//         <div className=\"form-group col-md-12\">\n//         <label type=\"text\" className='text-dark'>Name of Product</label>\n//             <input\n//             onChange={handleChange(\"name\")}\n//             name=\"photo\"\n//             className=\"form-control\"\n//             placeholder=\"Name\"\n//             value={name}\n//             />\n//         </div>\n//         <div className=\"form-group col-md-12\">\n//         <label type=\"text\" className='text-dark'>Description of Product</label>\n//             <textarea\n//             onChange={handleChange(\"description\")}\n//             name=\"photo\"\n//             className=\"form-control\"\n//             placeholder=\"Description\"\n//             value={description}\n//             />\n//         </div>\n//         <div className=\"form-group col-md-12\">\n//         <label type=\"text\" className='text-dark'>Price</label>\n//             <input\n//             onChange={handleChange(\"price\")}\n//             type=\"number\"\n//             className=\"form-control\"\n//             placeholder=\"Price\"\n//             value={price}\n//             />\n//         </div>\n//         <div className=\"form-group col-md-6\">\n//         <label type=\"text\" className='text-dark'>Select Category</label>\n//             <select\n//             onChange={handleChange(\"category\")}\n//             className=\"form-control\"\n//             placeholder=\"Category\"\n//             >\n//             <option>Select</option>\n//                 {categories && categories.map((category,index)=>{\n//                 return(\n//                     <option key={index} value={category._id}>{category.name}</option>\n//                 )\n//             })}\n            \n//             </select>\n//         </div>\n//         <div className=\"form-group col-md-6\">\n//         <label type=\"text\" className='text-dark'>stock</label>\n//             <input\n//             onChange={handleChange(\"stock\")}\n//             type=\"number\"\n//             className=\"form-control\"\n//             placeholder=\"Quantity\"\n//             value={stock}\n//             />\n//         </div>\n        \n//         <div className=\"form-group col-md-12\">\n//         <label for=\"formFile\" className=\"form-label text-dark\" >Upload Photo</label>\n//             <input\n//                 onChange={handleChange(\"photo\")}\n//                 className=\"form-control\"\n//                 id=\"formFile\"\n//                 type=\"file\"\n//                 name=\"photo\"\n//                 accept=\"image\"\n//                 placeholder=\"choose a file\"\n//             />\n            \n//         </div>\n        \n//         <button type=\"submit\" onClick={onSubmit} className=\"btn btn-outline-success col-md-6 ml-3 shadow-lg  btn-success  rounded mb-3\">\n//             Update Product\n//         </button>\n//         </form>\n//     );\n\n// return (\n//     <Base title='Add a Product Here! ' description='Welcome to Product Creation Section' className='container'>\n//         <Link to=\"/admin/dashboard\" className='btn shadow-lg rounded mt-4  btn-md bg-white text-dark mb-2'>Admin Home</Link>\n//         <h2  className=\"text-center mb-2 py-4 text-white \">Update a Product</h2>\n//     <div className=\"row mx-auto col-10 col-md-8 col-lg-6 bg-white mb-4 shadow-md rounded\">\n//         <div className='col-md-8 p-1 mt-2 offset-md-2'>\n//             {loadingMessage()}\n//             {performRedirect()}\n//             {successMessage()}\n//             {errorMessage()}\n//             {updateProductForm()}\n//         </div>\n//     </div>\n//     </Base>\n// )\n// }\n\n\n// export default UpdateProduct;\n\n\n\n\nimport React, { useState, useEffect } from \"react\";\nimport Base from \"../core/Base\";\nimport { Link } from \"react-router-dom\";\nimport {\n  getAllCategories,\n  getProduct,\n  updateProduct\n} from \"./helper/adminapicall\";\nimport { isAuthenticated } from \"../auth/helper/index\";\nimport { useMatch } from 'react-router-dom';\n\nconst UpdateProduct = () => {\n  const { user, token } = isAuthenticated();\n\n  const [values, setValues] = useState({\n    name: \"\",\n    description: \"\",\n    price: \"\",\n    stock: \"\",\n    photo: \"\",\n    categories: [],\n    category: \"\",\n    loading: false,\n    error: \"\",\n    createdProduct: \"\",\n    getaRedirect: false,\n    formData: \"\"\n  });\n\n  const {\n    name,\n    description,\n    price,\n    stock,\n    categories,\n    category,\n    loading,\n    error,\n    createdProduct,\n    getaRedirect,\n    formData\n  } = values;\n\n  const preload = productId => {\n    getProduct(productId).then(data => {\n      //console.log(data);\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        preloadCategories();\n        setValues({\n          ...values,\n          name: data.name,\n          description: data.description,\n          price: data.price,\n          category: data.category._id,\n          stock: data.stock,\n          formData: new FormData()\n        });\n      }\n    });\n  };\n\n  const preloadCategories = () => {\n    getAllCategories().then(data => {\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        setValues({\n          categories: data,\n          formData: new FormData()\n        });\n      }\n    });\n  };\n  const match = useMatch(\n         \"/admin/product/update/:productId\"\n       );\n\n  useEffect(() => {\n    preload(match.params.productId);\n  }, []);\n\n  //TODO: work on it\n  const onSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values, error: \"\", loading: true });\n\n    updateProduct(match.params.productId, user._id, token, formData).then(\n      data => {\n        if (data.error) {\n          setValues({ ...values, error: data.error });\n        } else {\n          setValues({\n            ...values,\n            name: \"\",\n            description: \"\",\n            price: \"\",\n            photo: \"\",\n            stock: \"\",\n            loading: false,\n            createdProduct: data.name\n          });\n        }\n      }\n    );\n  };\n\n  const handleChange = name => event => {\n    const value = name === \"photo\" ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues({ ...values, [name]: value });\n  };\n\n  const successMessage = () => (\n    <div\n      className=\"alert alert-success mt-3\"\n      style={{ display: createdProduct ? \"\" : \"none\" }}\n    >\n      <h4>{createdProduct} updated successfully</h4>\n    </div>\n  );\n  const errorMessage =() =>(\n            <div className=\" alert alert-danger mt-3\" style={{display : error ? \"\" : \"none\"}}>\n                <h4>Not able to update {createdProduct}</h4>\n           </div>\n  )\n  const createProductForm = () => (\n    <form>\n      <span>Post photo</span>\n      <div className=\"form-group\">\n        <label className=\"btn btn-block btn-success\">\n          <input\n            onChange={handleChange(\"photo\")}\n            type=\"file\"\n            name=\"photo\"\n            accept=\"image\"\n            placeholder=\"choose a file\"\n          />\n        </label>\n      </div>\n      <div className=\"form-group\">\n        <input\n          onChange={handleChange(\"name\")}\n          name=\"photo\"\n          className=\"form-control\"\n          placeholder=\"Name\"\n          value={name}\n        />\n      </div>\n      <div className=\"form-group\">\n        <textarea\n          onChange={handleChange(\"description\")}\n          name=\"photo\"\n          className=\"form-control\"\n          placeholder=\"Description\"\n          value={description}\n        />\n      </div>\n      <div className=\"form-group\">\n        <input\n          onChange={handleChange(\"price\")}\n          type=\"number\"\n          className=\"form-control\"\n          placeholder=\"Price\"\n          value={price}\n        />\n      </div>\n      <div className=\"form-group\">\n        <select\n          onChange={handleChange(\"category\")}\n          className=\"form-control\"\n          placeholder=\"Category\"\n        >\n          <option>Select</option>\n          {categories &&\n            categories.map((cate, index) => (\n              <option key={index} value={cate._id}>\n                {cate.name}\n              </option>\n            ))}\n        </select>\n      </div>\n      <div className=\"form-group\">\n        <input\n          onChange={handleChange(\"stock\")}\n          type=\"number\"\n          className=\"form-control\"\n          placeholder=\"Stock\"\n          value={stock}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        onClick={onSubmit}\n        className=\"btn btn-outline-success mb-3\"\n      >\n        Update Product\n      </button>\n    </form>\n  );\n\n  return (\n    <Base\n      title=\"Add a product here!\"\n      description=\"Welcome to product creation section\"\n      className=\"container bg-info p-4\"\n    >\n      <Link to=\"/admin/dashboard\" className=\"btn btn-md btn-dark mb-3\">\n        Admin Home\n      </Link>\n      <div className=\"row bg-dark text-white rounded\">\n        <div className=\"col-md-8 offset-md-2\">\n            {}\n          {successMessage()}\n          {createProductForm()}\n        </div>\n      </div>\n    </Base>\n  );\n};\n\nexport default UpdateProduct;\n"],"mappings":";;AAAA;;AAGA;AACA;AACA;AACA;AACA;;AAOA;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;;AAKA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,IAAI,MAAM,cAAc;AAC/B,SAASC,IAAI,QAAQ,kBAAkB;AACvC,SACEC,gBAAgB,EAChBC,UAAU,EACVC,aAAa,QACR,uBAAuB;AAC9B,SAASC,eAAe,QAAQ,sBAAsB;AACtD,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"},"metadata":{},"sourceType":"module","externalDependencies":[]}